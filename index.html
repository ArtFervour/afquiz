<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="icon" href="./img/aff.png">

    <title>Art Fervour Quiz</title>
  </head>
  <body>
    <style type="text/css">
        .card:hover {
            cursor: pointer;
            border-color: black;
        }
        .card-img-top {
            padding: 4px;
        }
        .selectedcard {
            border-color: black;
        }
        .guideimg {
            width: 21rem;
        }
        #emailcard, #emailcard:hover {
            border: none !important;
            cursor: default;
        }
    </style>
    <div class="container" align="center">
        <img src="./img/af.png" alt="Art Fervour Logo" style="width: 48px;">
    </div>

    <div class="container" id="citycontainer" style="padding-top: 3.2rem;">
        <h4 style="padding-bottom: 1.6rem;">Where do you want to see art?</h4>
      <div class="row">
        <div class="col-sm" align="center">
          <div class="card city" id="bangalore" style="width: 18rem;">
            <img class="card-img-top" src="./img/bangalore/logo.jpg">
            <h5>Bangalore</h5>
          </div>
          <br>
        </div>
        <div class="col-sm" align="center">
          <div class="card city" id="delhi" style="width: 18rem;">
            <img class="card-img-top" src="./img/delhi/logo.jpg">
            <h5>Delhi</h5>
          </div>
          <br>
        </div>
        <div class="col-sm" align="center">
          <div class="card city" id="goa" style="width: 18rem;">
            <img class="card-img-top" src="./img/goa/logo.jpg">
            <h5>Goa</h5>
          </div>
          <br>
        </div>
        <div class="col-sm" align="center">
          <div class="card city" id="jaipur" style="width: 18rem;">
            <img class="card-img-top" src="./img/jaipur/logo.jpg">
            <h5>Jaipur</h5>
          </div>
          <br>
        </div>
        <div class="col-sm" align="center">
          <div class="card city" id="kochi" style="width: 18rem;">
            <img class="card-img-top" src="./img/kochi/logo.jpg">
            <h5>Kochi</h5>
          </div>
          <br>
        </div>
        <div class="col-sm" align="center">
          <div class="card city" id="kolkata" style="width: 18rem;">
            <img class="card-img-top" src="./img/kolkata/logo.jpg">
            <h5>Kolkata</h5>
          </div>
          <br>
        </div>
        <div class="col-sm" align="center">
          <div class="card city" id="mumbai" style="width: 18rem;">
            <img class="card-img-top" src="./img/mumbai/logo.jpg">
            <h5>Mumbai</h5>
          </div>
          <br>
        </div>
      </div>
    </div>

    <div class="container" id="q1container" style="padding-top: 3.2rem;">
        <h4 style="padding-bottom: 1.6rem;">Pick a piece that draws you</h4>
      <div class="row">
        <div class="col-sm" align="center">
          <div class="card q1" id="q1a" style="width: 18rem;">
            <img class="card-img-top" src="./img/q1a.png">
          </div>
          <br>
        </div>
        <div class="col-sm" align="center">
          <div class="card q1" id="q1b" style="width: 18rem;">
            <img class="card-img-top" src="./img/q1b.png">
          </div>
          <br>
        </div>
        <div class="col-sm" align="center">
          <div class="card q1" id="q1c" style="width: 18rem;">
            <img class="card-img-top" src="./img/q1c.png">
          </div>
          <br>
        </div>
      </div>
    </div>

    <div class="container" id="q2container" style="padding-top: 3.2rem;">
        <h4 style="padding-bottom: 1.6rem;">Pick a piece that draws you</h4>
      <div class="row">
        <div class="col-sm" align="center">
          <div class="card q2" id="q2a" style="width: 18rem;">
            <img class="card-img-top" src="./img/q2a.png">
          </div>
          <br>
        </div>
        <div class="col-sm" align="center">
          <div class="card q2" id="q2b" style="width: 18rem;">
            <img class="card-img-top" src="./img/q2b.png">
          </div>
          <br>
        </div>
        <div class="col-sm" align="center">
          <div class="card q2" id="q2c" style="width: 18rem;">
            <img class="card-img-top" src="./img/q2c.png">
          </div>
          <br>
        </div>
      </div>
    </div>

    <div class="container" id="q3container" style="padding-top: 3.2rem;">
        <h4 style="padding-bottom: 1.6rem;">Pick a piece that draws you</h4>
      <div class="row">
        <div class="col-sm" align="center">
          <div class="card q3" id="q3a" style="width: 18rem;">
            <img class="card-img-top" src="./img/q3a.png">
          </div>
          <br>
        </div>
        <div class="col-sm" align="center">
          <div class="card q3" id="q3b" style="width: 18rem;">
            <img class="card-img-top" src="./img/q3b.png">
          </div>
          <br>
        </div>
        <div class="col-sm" align="center">
          <div class="card q3" id="q3c" style="width: 18rem;">
            <img class="card-img-top" src="./img/q3c.jpg">
          </div>
          <br>
        </div>
      </div>
    </div>

    <div class="container" id="emailcontainer" style="padding-top: 3.2rem;" align="center">
        <h4>You're just a step away from your personalized art guide!</h4>
        <br><br>
        <div class="row justify-content-center">
            <div class="col-3">
                <div class="card" id="emailcard" style="width: 18rem;">
                    <div class="card-body">
                        <form name="quiz" id="emailform" method="POST" data-netlify="true">
                          <div class="form-group">
                            <label for="inputemail">Email address</label>
                            <input type="email" class="form-control" id="inputemail" aria-describedby="emailHelp" placeholder="Enter email" name="email">
                            <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                          </div>
                          <button type="submit" class="btn btn-light" id="submitemail" disabled>Submit</button>
                        </form>
                    </div>
                </div>
            </div>
            <br>
        </div>
    </div>

    <div class="container" id="endingcontainer" style="padding-top: 3.2rem;" align="center">
        <h4 id="endingh"></h4>
        <p>Here's a guide for you:</p>
        <br>
        <img src="./img/kolkata/mixed.jpg" alt="Your personalized art guide" class="guideimg">
        <br><br>
        <button type="button" id="restart" class="btn btn-light">Restart Quiz</button>
        <br>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

    <script>
        $( document ).ready(function() {
            $('#q1container').hide();
            $('#q2container').hide();
            $('#q3container').hide();
            $('#emailcontainer').hide();
            $('#endingcontainer').hide();
            var q = ['', '', ''];
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            var tending = 'You\'re a Traditionalist!';
            var cending = 'You\'re a Progressivist!';
            var mending = 'You\'re a Mixed Bag!';
            $('.city').click(function() {
                $('#citycontainer').hide(700);
                $('#q1container').show(1000);
            });
            $('#q1a').click(function() {
                q[0] = 'T';
            });
            $('#q1b').click(function() {
                q[0] = 'C';
            });
            $('#q1c').click(function() {
                q[0] = 'C';
            });
            $('.q1').click(function() {
                $('#q1container').hide(700);
                $('#q2container').show(1000);
            });
            $('#q2a').click(function() {
                q[1] = 'C';
            });
            $('#q2b').click(function() {
                q[1] = 'T';
            });
            $('#q2c').click(function() {
                q[1] = 'T';
            });
            $('.q2').click(function() {
                $('#q2container').hide(700);
                $('#q3container').show(1000);
            });
            $('#q3a').click(function() {
                q[2] = 'T';
            });
            $('#q3b').click(function() {
                q[2] = 'C';
            });
            $('#q3c').click(function() {
                q[2] = 'C';
            });
            $('.q3').click(function() {
                $('#q3container').hide(700);
                $('#emailcontainer').show(1000);
            });
            $('#submitemail').prop('disabled', true);
            $('#inputemail').keyup(function() {
                var email = String($(this).val());
                console.log(email);
                if (re.test(email.toLowerCase())) {
                    $('#submitemail').prop('disabled', false);
                }
            });
            $('#emailform').submit(function(e) {
                e.preventDefault();
                var $form = $(this);
                $.post($form.attr("action"), $form.serialize()).then(function() {
                    $('#emailcontainer').hide(700);
                    $('#endingcontainer').show(1000);
                    if (q[0] === 'T' && q[1] === 'T') {
                        $('#endingh').text(tending);
                    } else if (q[0] === 'C' && q[1] === 'C') {
                        $('#endingh').text(cending);
                    } else {
                        $('#endingh').text(mending);
                    }
                });
            });
            $('#restart').click(function() {
                q = ['', '', ''];
                $('#endingcontainer').hide();
                $('#q1container').show();
            })
        });
    </script>
  </body>
</html>