<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="icon" href="./img/aff.png">

    <title>Art Fervour Quiz</title>
  </head>
  <body>
    <style type="text/css">
        .card {
            width: 18rem;
        }
        .card:hover {
            cursor: pointer;
            border-color: black;
        }
        .card-img-top {
            padding: 4px;
        }
        .selectedcard {
            border-color: black;
        }
        .guideimg {
            width: 100%;
            max-width: 720px;
        }
        #emailcard, #emailcard:hover {
            border: none !important;
            cursor: default;
        }
        #aflogo {
            width: 48px;
        }
        #headercontainer {
            padding-top: 3.2rem;
        }
        .maincontainer {
            padding-top: 3.2rem;
            padding-bottom: 3.2rem;
        }
        .maintext {
            padding-bottom: 1.6rem;
        }
    </style>
    <div class="container" id="headercontainer" align="center">
        <img src="./img/af.png" alt="Art Fervour Logo" id="aflogo">
    </div>

    <div class="container maincontainer" id="citycontainer">
        <h4 class="maintext">Where do you want to see art?</h4>
        <div class="row">
            <div class="col-sm" align="center">
                <div class="card city" id="bangalore">
                    <img class="card-img-top" src="./img/bangalore/logo.png">
                    <h5>Bangalore</h5>
                </div>
                <br>
            </div>
            <div class="col-sm" align="center">
                <div class="card city" id="delhi">
                    <img class="card-img-top" src="./img/delhi/logo.png">
                    <h5>Delhi</h5>
                </div>
                <br>
            </div>
            <div class="col-sm" align="center">
                <div class="card city" id="goa">
                    <img class="card-img-top" src="./img/goa/logo.png">
                    <h5>Goa</h5>
                </div>
                <br>
            </div>
            <div class="col-sm" align="center">
                <div class="card city" id="jaipur">
                    <img class="card-img-top" src="./img/jaipur/logo.png">
                    <h5>Jaipur</h5>
                </div>
              <br>
            </div>
            <div class="col-sm" align="center">
                <div class="card city" id="kochi">
                    <img class="card-img-top" src="./img/kochi/logo.png">
                    <h5>Kochi</h5>
                </div>
                <br>
            </div>
            <div class="col-sm" align="center">
                <div class="card city" id="kolkata">
                    <img class="card-img-top" src="./img/kolkata/logo.png">
                    <h5>Kolkata</h5>
                </div>
                <br>
            </div>
            <div class="col-sm" align="center">
                <div class="card city" id="mumbai">
                    <img class="card-img-top" src="./img/mumbai/logo.png">
                    <h5>Mumbai</h5>
                </div>
                <br>
            </div>
      </div>
    </div>

    <div class="container maincontainer" id="q1container">
        <h4 class="maintext">Pick a piece that draws you</h4>
        <div class="row">
            <div class="col-sm" align="center">
                <div class="card q1" id="q1a">
                    <img class="card-img-top" src="./img/q1a.png">
                </div>
                <br>
            </div>
            <div class="col-sm" align="center">
                <div class="card q1" id="q1b">
                    <img class="card-img-top" src="./img/q1b.png">
                </div>
                <br>
            </div>
            <div class="col-sm" align="center">
                <div class="card q1" id="q1c">
                    <img class="card-img-top" src="./img/q1c.png">
                </div>
                <br>
            </div>
        </div>
    </div>

    <div class="container maincontainer" id="q2container">
        <h4 class="maintext">Pick a piece that draws you</h4>
        <div class="row">
            <div class="col-sm" align="center">
                <div class="card q2" id="q2a">
                    <img class="card-img-top" src="./img/q2a.png">
                </div>
                <br>
            </div>
            <div class="col-sm" align="center">
                <div class="card q2" id="q2b">
                    <img class="card-img-top" src="./img/q2b.png">
                </div>
                <br>
            </div>
            <div class="col-sm" align="center">
                <div class="card q2" id="q2c">
                    <img class="card-img-top" src="./img/q2c.png">
                </div>
                <br>
            </div>
        </div>
    </div>

    <div class="container maincontainer" id="q3container">
        <h4 class="maintext">Pick a piece that draws you</h4>
        <div class="row">
            <div class="col-sm" align="center">
                <div class="card q3" id="q3a">
                    <img class="card-img-top" src="./img/q3a.png">
                </div>
                <br>
            </div>
            <div class="col-sm" align="center">
                <div class="card q3" id="q3b">
                    <img class="card-img-top" src="./img/q3b.png">
                </div>
                <br>
            </div>
            <div class="col-sm" align="center">
                <div class="card q3" id="q3c">
                    <img class="card-img-top" src="./img/q3c.jpg">
                </div>
                <br>
            </div>
        </div>
    </div>

    <div class="container maincontainer" id="emailcontainer" align="center">
        <h4 class="maintext">You're just a step away from your personalized art guide!</h4>
        <div class="row">
            <div class="col-sm" align="center">
                <div class="card" id="emailcard">
                    <div class="card-body">
                        <form name="quiz" id="emailform" method="POST" data-netlify="true">
                            <div class="form-group">
                                <label for="inputemail">Email address</label>
                                <input type="email" class="form-control" id="inputemail" aria-describedby="emailHelp" placeholder="Enter email" name="email">
                                <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                            </div>
                            <button type="submit" class="btn btn-light" id="submitemail" disabled>Submit</button>
                        </form>
                    </div>
                </div>
            </div>
            <br>
        </div>
    </div>

    <div class="container maincontainer" id="endingcontainer" align="center">
        <h4 id="endingh"></h4>
        <br>
        <p class="maintext" align="left" id="endingp"></p>
        <img src="" alt="Your personalized art guide" class="guideimg" id="guideimg">
        <br><br>
        <button type="button" id="restart" class="btn btn-light">Restart Quiz</button>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

    <script>
        $('#q1container').hide();
        $('#q2container').hide();
        $('#q3container').hide();
        $('#emailcontainer').hide();
        $('#endingcontainer').hide();
        $( document ).ready(function() {
            var q = ['', '', ''];
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            var tending = 'You\'re a Traditionalist!';
            var cending = 'You\'re a Progressivist!';
            var mending = 'You\'re a Mixed Bag!';
            var tendingp = 'You like things traditional. Here\'s a guide for you:';
            var cendingp = 'You like new-age shit. Here\'s a guide for you:';
            var mendingp = 'You like it all! Here\'s a guide for you:';
            var city = '';
            var type = '';
            var emailcollected = window.location.search.includes('collected');
            $('#bangalore').click(function() {
                city = 'bangalore';
            });
            $('#delhi').click(function() {
                city = 'delhi';
            });
            $('#goa').click(function() {
                city = 'goa';
            });
            $('#jaipur').click(function() {
                city = 'jaipur';
            });
            $('#kochi').click(function() {
                city = 'kochi';
            });
            $('#kolkata').click(function() {
                city = 'kolkata';
            });
            $('#mumbai').click(function() {
                city = 'mumbai';
            });
            $('.city').click(function() {
                $('#citycontainer').hide(400);
                $('#q1container').show(800);
            });
            $('#q1a').click(function() {
                q[0] = 'T';
            });
            $('#q1b').click(function() {
                q[0] = 'C';
            });
            $('#q1c').click(function() {
                q[0] = 'C';
            });
            $('.q1').click(function() {
                $('#q1container').hide(400);
                $('#q2container').show(800);
            });
            $('#q2a').click(function() {
                q[1] = 'C';
            });
            $('#q2b').click(function() {
                q[1] = 'T';
            });
            $('#q2c').click(function() {
                q[1] = 'T';
            });
            $('.q2').click(function() {
                $('#q2container').hide(400);
                $('#q3container').show(800);
            });
            $('#q3a').click(function() {
                q[2] = 'T';
            });
            $('#q3b').click(function() {
                q[2] = 'C';
            });
            $('#q3c').click(function() {
                q[2] = 'C';
            });
            $('.q3').click(function() {
                $('#q3container').hide(400);
                if (emailcollected) {
                    $('#endingcontainer').show(800);
                } else {
                    $('#emailcontainer').show(800);
                }
                if (q[0] === 'T' && q[1] === 'T') {
                    $('#endingh').text(tending);
                    $('#endingp').text(tendingp);
                    type = 'traditional';
                    $('#guideimg').prop('src', './img/' + city + '/' + type + '.jpg');
                } else if (q[0] === 'C' && q[1] === 'C') {
                    $('#endingh').text(cending);
                    $('#endingp').text(cendingp);
                    type = 'contemporary';
                    $('#guideimg').prop('src', './img/' + city + '/' + type + '.jpg');
                } else {
                    $('#endingh').text(mending);
                    $('#endingp').text(mendingp);
                    type = 'mixed';
                    $('#guideimg').prop('src', './img/' + city + '/' + type + '.jpg');
                }
            });
            $('#submitemail').prop('disabled', true);
            $('#inputemail').keyup(function() {
                var email = String($(this).val());
                if (re.test(email.toLowerCase())) {
                    $('#submitemail').prop('disabled', false);
                }
            });
            $('#emailform').submit(function(e) {
                e.preventDefault();
                var $form = $(this);
                $.post($form.attr("action"), $form.serialize()).then(function() {
                    emailcollected = true;
                    $('#emailcontainer').hide(40);
                    $('#endingcontainer').show(800);
                });
            });
            $('#restart').click(function() {
                q = ['', '', ''];
                $('#endingcontainer').hide();
                $('#citycontainer').show();
            })
        });
    </script>
  </body>
</html>